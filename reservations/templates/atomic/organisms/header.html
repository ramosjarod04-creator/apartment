<div class="nav-content-layout">
    <ul class="nav-links">
        <li class="mobile-section-label">MAIN MENU</li>
        <li><a href="{% url 'dashboard' %}" class="nav-link">Dashboard</a></li>
        {% if user.is_staff %}
            <li><a href="{% url 'admin_dashboard' %}" class="nav-link">Admin Panel</a></li>
        {% endif %}
        <li><a href="{% url 'apartment_list' %}" class="nav-link">Apartments</a></li>
        <li><a href="{% url 'reservation_list' %}" class="nav-link">Reservations</a></li>
    </ul>

    <div class="nav-actions">
        <a href="{% url 'inbox' %}" class="action-card">
            <span class="icon">✉️</span>
            <span class="label">Messages</span>
            {% if unread_messages_count > 0 %}
                <span class="count-badge">{{ unread_messages_count }}</span>
            {% endif %}
        </a>
        
        <a href="{% url 'reservation_create' %}" class="btn-primary-nav">
            <span class="plus">+</span> Book Now
        </a>
        
        <div class="user-pill">
            <div class="user-meta">
                <span class="user-handle">@{{ user.username }}</span>
                <a href="{% url 'logout' %}" class="link-logout">Log out</a>
            </div>
        </div>
    </div>
</div>

<style>
    /* --- Main Layout --- */
    .nav-content-layout { display: flex; align-items: center; width: 100%; gap: 1.5rem; }
    .nav-links { display: flex; list-style: none; gap: 1rem; align-items: center; }
    .nav-link { 
        text-decoration: none; color: var(--gray-700); font-weight: 600; font-size: 0.9rem;
        padding: 0.5rem 0.75rem; border-radius: 8px; transition: 0.2s;
    }
    .nav-link:hover { background: var(--gray-100); color: var(--primary); }

    .nav-actions { display: flex; align-items: center; gap: 1rem; }

    /* --- Messages Card --- */
    .action-card { 
        text-decoration: none; color: var(--gray-700); display: flex; 
        align-items: center; gap: 10px; font-weight: 600; font-size: 0.9rem;
        padding: 0.6rem 1rem; border-radius: 10px; white-space: nowrap;
    }

    .count-badge {
        background: var(--danger); color: white; font-size: 0.7rem;
        padding: 1px 6px; border-radius: 20px;
    }

    /* --- Primary Button --- */
    .btn-primary-nav {
        background: var(--primary); color: white; text-decoration: none;
        padding: 0.7rem 1.25rem; border-radius: 10px; font-weight: 700;
        font-size: 0.9rem; white-space: nowrap; display: flex; align-items: center; gap: 8px;
    }
    .btn-primary-nav:hover { background: var(--primary-hover); }

    /* --- User Profile --- */
    .user-pill { border-left: 1px solid var(--gray-200); padding-left: 1rem; }
    .user-meta { display: flex; flex-direction: column; line-height: 1.2; }
    .user-handle { font-size: 0.85rem; font-weight: 700; color: var(--gray-900); }
    .link-logout { font-size: 0.75rem; color: var(--danger); text-decoration: none; font-weight: 600; }

    .mobile-section-label { display: none; }

    /* --- MOBILE OVERRIDES (image_88141d.png fixes) --- */
    @media (max-width: 991px) {
        .nav-content-layout { flex-direction: column; align-items: flex-start; gap: 2rem; }
        .nav-links { flex-direction: column; width: 100%; gap: 0.5rem; }
        
        .mobile-section-label { 
            display: block; font-size: 0.7rem; font-weight: 900; 
            color: var(--gray-400); letter-spacing: 1.5px; margin-bottom: 0.5rem;
        }

        .nav-link { 
            display: block; width: 100%; font-size: 1.1rem; padding: 0.75rem 0;
            border-bottom: 1px solid var(--gray-100); border-radius: 0;
        }
        
        .nav-actions { flex-direction: column; width: 100%; gap: 1.25rem; }
        
        .action-card { 
            width: 100%; background: var(--gray-50); border: 1px solid var(--gray-100);
            padding: 1rem; justify-content: flex-start;
        }
        
        .btn-primary-nav { 
            width: 100%; justify-content: center; padding: 1rem; 
            font-size: 1rem; box-shadow: 0 4px 12px rgba(61, 64, 224, 0.2);
        }
        
        .user-pill { 
            border-left: none; padding-left: 0; width: 100%; 
            padding-top: 1.5rem; border-top: 1px solid var(--gray-200); 
        }
        .user-handle { font-size: 1.1rem; }
    }
</style>
